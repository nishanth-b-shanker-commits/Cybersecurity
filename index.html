<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phish-Check | URL Scanner</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-6">

    <div class="max-w-md w-full bg-gray-800 rounded-xl shadow-2xl p-8 border border-gray-700">
        <h1 class="text-3xl font-bold text-center mb-2 text-blue-400">Phish-Check</h1>
        <p class="text-gray-400 text-center mb-8 text-sm">MCA Cybersecurity Mini-Project</p>

        <div class="space-y-4">
            <input id="urlInput" type="text" placeholder="Enter URL (e.g., https://example.com)" 
                   class="w-full p-3 rounded bg-gray-700 border border-gray-600 focus:outline-none focus:border-blue-500 transition">
            
            <button onclick="scanURL()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded transition shadow-lg">
                Analyze URL
            </button>
        </div>

        <div id="resultArea" class="mt-8 hidden p-4 rounded-lg bg-gray-900 border border-gray-700">
            <h3 id="statusText" class="text-lg font-bold mb-2"></h3>
            <div id="stats" class="text-sm space-y-1 text-gray-300"></div>
        </div>
    </div>

    <script>
        async function scanURL() {
            const url = document.getElementById('urlInput').value;
            const statusText = document.getElementById('statusText');
            const statsDiv = document.getElementById('stats');
            const resultArea = document.getElementById('resultArea');
            
            // Note: In a real production app, never expose API keys. 
            // For an MCA project, you can paste it here:
            const apiKey = 'YOUR_VIRUSTOTAL_API_KEY'; 

            if (!url) return alert("Please enter a URL");

            resultArea.classList.remove('hidden');
            statusText.innerText = "Scanning...";
            statusText.className = "text-yellow-400 font-bold";
            statsDiv.innerHTML = "";

            try {
                // VirusTotal requires URL to be base64 encoded (no padding)
                const urlId = btoa(url).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
                
                const response = await fetch(`https://www.virustotal.com/api/v3/urls/${urlId}`, {
                    headers: { 'x-apikey': apiKey }
                });

                const data = await response.json();

                if (response.ok) {
                    const stats = data.data.attributes.last_analysis_stats;
                    
                    if (stats.malicious > 0) {
                        statusText.innerText = "⚠️ DANGER: MALICIOUS";
                        statusText.className = "text-red-500 font-bold";
                    } else {
                        statusText.innerText = "✅ SAFE: NO THREATS";
                        statusText.className = "text-green-400 font-bold";
                    }

                    statsDiv.innerHTML = `
                        <p>Malicious detections: ${stats.malicious}</p>
                        <p>Suspicious: ${stats.suspicious}</p>
                        <p>Harmless/Clean: ${stats.harmless}</p>
                    `;
                } else {
                    statusText.innerText = "Error: URL not found in database";
                    statusText.className = "text-orange-400";
                }
            } catch (error) {
                statusText.innerText = "Error connecting to API";
                statusText.className = "text-red-500";
            }
        }
    </script>
</body>
</html>